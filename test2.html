<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="en"><head profile="http://www.ietf.org/rfc/rfc2731.txt">    <meta name="generator" content=            "HTML Tidy for Linux/x86 (vers 25 March 2009), see http://tidy.sourceforge.net/">    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">    <meta http-equiv="Content-Language" content="en">    <meta http-equiv="Content-Style-Type" content="text/css">    <meta http-equiv="Content-Script-Type" content="text/javascript">    <meta name="DC.author" content="Gérard Talbot">    <meta name="DC.creator" content="Gérard Talbot">    <meta name="DC.title" content=            "Testcase for bug 189308, bug 144868 and bug 305160: various document scroll values are not updated on a scroll event">    <meta name="DC.description" content=            "Cross-browser demo page showing various DOM 0 and DHTML object model properties rendered on keyboard and/or mouse scroll events and on mousewheel rolling events. The demo page also serves as a testcase for bugzilla bugfile 189308, bugfile 144868 and bug 305160.">    <meta name="DC.date.created" content="2003-03-03T09:54:03+11:00" scheme=            "W3CDTF">    <meta name="DC.date.modified" content="2009-04-04T09:54:03+11:00" scheme=            "W3CDTF">    <title>Testcase for bug 189308 and bug 144868: various document scroll        values are not updated on a scroll event</title>    <link rel="icon" href="../GRAPHICS/PNG/Mozilla15_16x16.png" type=            "image/png">    <link rel="start" href="../" title="Gérard Talbot's homepage">    <link rel="top" href="../" title="Gérard Talbot's Homepage">    <link rel="up" href="./" title="Bugzilla Section">    <link rel="prev" href="FramesetMetaTestCase.html" title=            "Frameset and frames meta-testcase">    <link rel="next" href="Bug111647.html" title=            "Mousewheel roll detection and its direction">    <link rel="last" href="Bug132035_Page_Break_Inside_Avoid.html" title=            "Testcase on page-break-inside: avoid;">    <link rel="HTML&nbsp;validation" href=            "http://validator.w3.org/check?uri=http%3A%2F%2Fwww.gtalbot.org%2FBugzillaSection%2FBug189308_ScrollEvent.html">    <link rel="CSS&nbsp;validation" href=            "http://jigsaw.w3.org/css-validator/validator?uri=http://www.gtalbot.org/BugzillaSection/Bug189308_ScrollEvent.html&amp;warning=2&amp;profile=css21&amp;usermedium=all">    <style type="text/css">        body        {            background-color: white;            color: black;            line-height: 140%;        }        a:link {background-color: white; color: blue;}        a:visited {background-color: white; color: purple;}        a:link:hover {background-color: #EEE; color: blue;}        a:visited:hover {background-color: #EEE; color: purple;}        a:focus, button:focus, input:focus {outline: 2px dotted black;}        #idTable        {            background-color: #DDD;            border: solid #CCC;            left: 100px;            position: fixed;            top: 75px;            width: 36%;        }        td {border: 2px solid black; font-size: 80%;}        .Netscape6        {            background-color: inherit;            color: #457566;            font-family: Arial, sans-serif;            font-size: 90%;            font-weight: 700;            padding: 2px;        }        #wpxo, #wpyo, #ddsl, #ddst, #dbsl, #dbst, #wsx, #wsy        {            background-color: black;            border: red 2px outset;            color: #AF2;            font-weight: 700;            text-align: center;        }        #ct, #et        {            background-color: black;            border: blue 2px outset;            color: aqua;            font-weight: 700;            text-align: center;        }        #ScrollEvents, #MouseWheelRollEvents, #mw        {            background-color: white;            border: purple 2px outset;            color: purple;            font-weight: 700;            text-align: center;        }        #long-sentence {white-space: nowrap;}        fieldset, legend {border: solid #457566; padding: 8px;}        #footer {font-size: 150%; line-height: 1.5; text-align: center;}        #footer img, #validation img, #validation a {margin: 0em 1em; vertical-align: middle;}        #validation img {padding: 0.5em;}    </style>    <script type="text/javascript">        var NumberOfMouseWheelRollEvents = 0; var NumberOfScrollEvents = 0;        function ScrollingDetected(evt)        {            var TheEventObject = evt || event;            if(window.addEventListener)            {                document.getElementById("wpxo").value = window.pageXOffset;                document.getElementById("wpyo").value = window.pageYOffset;                document.getElementById("ddsl").value = document.documentElement.scrollLeft;                document.getElementById("ddst").value = document.documentElement.scrollTop;                document.getElementById("dbsl").value = document.body.scrollLeft;                document.getElementById("dbst").value = document.body.scrollTop;                document.getElementById("wsx").value = window.scrollX;                document.getElementById("wsy").value = window.scrollY;            }            else if(document.addEventListener)            {                document.getElementById("wpxo").value = window.pageXOffset ;                document.getElementById("wpyo").value = window.pageYOffset ;                document.getElementById("dbsl").value = document.body.scrollLeft ;                document.getElementById("dbst").value = document.body.scrollTop ;                document.getElementById("ddsl").value = document.documentElement.scrollLeft ;                document.getElementById("ddst").value = document.documentElement.scrollTop ;            }            else if(document.all && document.compatMode && document.compatMode == "CSS1Compat")            {                document.getElementById("ddsl").value = document.documentElement.scrollLeft ;                document.getElementById("ddst").value = document.documentElement.scrollTop ;                /*                 document.getElementById("idTable").style.left = document.documentElement.scrollLeft + 100 + "px";                 document.getElementById("idTable").style.top = document.documentElement.scrollTop + 75 + "px";                 We assume here that position: fixed is supported in IE. In other words,                 this javascript application targets IE 7 and IE 8 and deliberately does                 not target IE 6 [anymore].                 */                document.getElementById("dbsl").value = document.body.scrollLeft ;                document.getElementById("dbst").value = document.body.scrollTop ;            };            document.getElementById("ScrollEvents").value = ++NumberOfScrollEvents;            document.getElementById("et").value = TheEventObject.type;        }        function MouseWheelRollingDetected(evt)        {            var TheEventObject = evt || window.event;            document.getElementById("MouseWheelRollEvents").value = ++NumberOfMouseWheelRollEvents;            var DirectionUpOrDown = "?";            if(window.event && event.wheelDelta)            {                document.getElementById("mw").value = event.wheelDelta;                if(event.wheelDelta > 0)                {                    DirectionUpOrDown = " \u2191 ";                }                else                {                    DirectionUpOrDown = " \u2193 ";                };            }            else if(evt.detail)            {                if(evt.detail < 0)                /*                 =============================================================                 If the user has set its mousewheel to scroll a particular,                 specific number of lines at                 Start/Settings/Control Panel/Mouse/Wheel tab/Roll the wheel                 one notch to scroll: The following number of lines at a time,                 then evt.detail will reflect this number of lines if it is                 <= |24|.                 That is also what happens in Konqueror 4.x.                 If the user has set its mousewheel to scroll one screen at a                 time at Start/Settings/Control Panel/Mouse/Wheel tab/Roll                 the wheel one notch to scroll: One screen at a time,                 then evt.detail will be ±32768 reflecting                 evt.SCROLL_PAGE_UP = -32768 and evt. SCROLL_PAGE_DOWN = 32768                 determining the direction of rolling of the mousewheel.                 With "Roll the wheel one notch to scroll: One screen at a time",                 evt.detail is == ±32768                 ===============================================================                 */                {                    DirectionUpOrDown = " \u2191 ";                }                else if(evt.detail > 0)                /*                 with Roll the wheel one notch to scroll: One screen at a time,                 evt.detail is == ±32768                 */                {                    DirectionUpOrDown = " \u2193 ";                };            };            document.getElementById("et").value = DirectionUpOrDown + TheEventObject.type + DirectionUpOrDown;        }        function init()        {            document.getElementById("et").value = "load";            /*             ================================================             Rolling the mouse wheel:             associating a recording function to the event             ================================================             */            if("onmousewheel" in document) // MSIE 6, MSIE 7, MSIE 8 and Safari 3+            {                document.onmousewheel = MouseWheelRollingDetected;            }            else // we first collapse the table cells for event.wheelDelta            {                if(navigator.product == "Gecko" && navigator.productSub && navigator.productSub > "20041010" && navigator.userAgent.indexOf("rv:1.8") != -1)                /* Mozilla 1.8alpha; see bug 77019 and bug 242368; must be higher                 than 1.7.x; Mozilla 1.8a2 supports accordingly dynamic collapsing                 of rows in both border-collapse models but not 1.7.x versions */                {                    document.getElementById("trmwDistanceDirection").style.visibility = "collapse";                }                else                {                    document.getElementById("trmwDistanceDirection").style.display = "none";                };                // and then we register the rolling of the mousewheel event accordingly                if(window.addEventListener)                {                    window.addEventListener("DOMMouseScroll", MouseWheelRollingDetected, false);                    // Gecko-based browsers and Konqueror 4.x support DOMMouseScroll event                };            };            /*             ================================================             Moving the mouse in the browser window viewport:             associating a recording function to such event             ================================================             */            if(window.addEventListener)            {                window.addEventListener("mousemove", MouseMoves, true);            }            else if(window.onmousemove)            {                window.onmousemove = MouseMoves;            }            else if(document.documentElement.onmousemove)            {                document.documentElement.onmousemove = MouseMoves;            };            /*             ================================================             Scrolling the browser window viewport:             associating a recording function to such event             ================================================             */            if(window.addEventListener) // Firefox 1+, Opera 9, Safari 3+, etc.            {                window.addEventListener("scroll", ScrollingDetected, false);            }            else if(document.addEventListener) // Opera 7, Opera 8            {                document.addEventListener("scroll", ScrollingDetected, false);            }            else if("onscroll" in self) // MSIE 6, 7 and MSIE 8            {                self.onscroll = ScrollingDetected;            };            if(typeof window.pageXOffset != "number")//typeof ?????????????            {                document.getElementById("trwpxo").style.display = "none";                document.getElementById("trwpyo").style.display = "none";            };            if(typeof window.scrollX != "number")            {                document.getElementById("trwsx").style.display = "none";                document.getElementById("trwsy").style.display = "none";            };        }        function MouseMoves(evt)        {            if(window.addEventListener)            {                document.getElementById("ct").value = evt.target.nodeName;            }            else if (window.event)            {                document.getElementById("ct").value = event.srcElement.nodeName;            };        }    </script></head><body onload="document.forms[0].reset(); init();"><form action="">    <table id="idTable">        <col width="3*">        <col width="*">        <tr id="trwpxo">            <td id="twpxo"><span class=                                         "Netscape6">window.pageXOffset</span></td>            <td align="center"><input size="4" maxlength="4" id="wpxo"></td>        </tr>        <tr id="trwpyo">            <td id="twpyo"><span class=                                         "Netscape6">window.pageYOffset</span></td>            <td align="center"><input size="4" maxlength="4" id="wpyo"></td>        </tr>        <tr>            <td id="tddsl"><span class=                                         "Netscape6">document.documentElement.scrollLeft</span></td>            <td align="center"><input size="4" maxlength="4" id="ddsl"></td>        </tr>        <tr>            <td id="tddst"><span class=                                         "Netscape6">document.documentElement.scrollTop</span></td>            <td align="center"><input size="4" maxlength="4" id="ddst"></td>        </tr>        <tr>            <td colspan="2">Current target element's tagname <input size="10"                                                                    maxlength="10" id="ct"></td>        </tr>        <tr>            <td colspan="2">Current event type <input size="20" maxlength="24"                                                      id="et"></td>        </tr>        <tr>            <td>Number of scroll events fired</td>            <td align="center"><input size="4" maxlength="4" id=                    "ScrollEvents"></td>        </tr>        <tr id="trMouseWheelRoll">            <td>Number of mousewheel roll events fired</td>            <td align="center"><input size="4" maxlength="4" id=                    "MouseWheelRollEvents"></td>        </tr>        <tr id="trmwDistanceDirection">            <td id="tmw">Distance and direction rolled by the mousewheel<br>                <img src="../GRAPHICS/PNG/MSIE6_16x16.png" title=                        "Internet Explorer 6 only" alt="Internet Explorer 6 only" class=                             "IconCompat"> 6 only <span class=                                                                "Explorer">event.wheelDelta</span></td>            <td align="center"><input size="4" maxlength="4" id="mw"></td>        </tr>        <tr>            <td id="tdbsl"><span class=                                         "Netscape6">document.body.scrollLeft</span></td>            <td align="center"><input size="4" maxlength="4" id="dbsl"></td>        </tr>        <tr>            <td id="tdbst"><span class=                                         "Netscape6">document.body.scrollTop</span></td>            <td align="center"><input size="4" maxlength="4" id="dbst"></td>        </tr>        <tr id="trwsx">            <td id="twsx"><span class="Netscape6">window.scrollX</span></td>            <td align="center"><input size="4" maxlength="4" id="wsx"></td>        </tr>        <tr id="trwsy">            <td id="twsy"><span class="Netscape6">window.scrollY</span></td>            <td align="center"><input size="4" maxlength="4" id="wsy"></td>        </tr>    </table></form><h1>This is a testcase for <a href=                                      "https://bugzilla.mozilla.org/show_bug.cgi?id=189308" title=                                      "onscroll does not work with mousewheel rolling, keyboard arrows, PgDn, PgUp, Home, End keys">    bugfile 189308</a>, <a href=                                   "https://bugzilla.mozilla.org/show_bug.cgi?id=144868" title=                                   "Mousewheel roll event into DOM events">bug 144868</a> and <a href=                                                                                                         "https://bugzilla.mozilla.org/show_bug.cgi?id=305160" title=                                                                                                         "Strange bubbling behaviour for DOM scroll events">bug 305160</a></h1><p>Scroll this document with the mousewheel (roll or click-N-move) or    with the keyboard (left, right, up, down navigational arrows, PgUp, PgDn,    Home, End keys - and Ctrl+Home, Ctrl+End keys in older releases).</p><p>Window or document scroll view values should update correspondent    input text boxes depending on the browser you're using. - This was bug    125278 at Opera's BTS -</p><h2><a href="#AnchorForTestingScrolling">Test scrolling when going to an    anchor</a></h2><p id="long-sentence">This is a long sentence created to help the    generation of an horizontal scrollbar for testing purpose. <img src=                                                                            "../GRAPHICS/GIF/DocumentScrollView.gif" width="349" height="244" title=                                                                            "The document scroll view: the window is scrolled." alt=                                                                            "The document scroll view: the window is scrolled.">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p><fieldset>    <legend>Bugs in Netscape 7.02 for Windows</legend>    <ul>        <li>Resize the window so that an horizontal scrollbar appear. Then            scroll the view to the right most and bottom most position of the            document. Then press the Home key. Results: the document view will be            repositioned at the document's left-top corner, both horizontal and            vertical scrollbars (xul:thumb) will be repositioned at their start            (left-most or top-most) position but the window.pageXOffset,            document.body.scrollLeft and window.scrollX values will not be            updated and will not show 0.</li>        <li>Scroll the document down with PgDn (or in any other way with the            keyboard or mouse - but NOT with the mousewheel). Then, place the            mouse cursor in the document where the Current target element's            tagname is HTML. Then roll the mousewheel. Results: no scroll event            will be fired and, from there and on, the activity of the mousewheel            will not trigger any scroll event.</li>    </ul></fieldset><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p>this is filler text</p><p><a name="AnchorForTestingScrolling" id=        "AnchorForTestingScrolling">Anchor here for testing scrolling</a></p><p id="footer">For all your browsing needs, I recommend using    <a href="http://www.mozilla.com/en-US/firefox/all.html" title=            "Download the latest version of Firefox"><img src=                                                                  "../GRAPHICS/PNG/download-firefox6-469x60.png" width="468" height="60"                                                          alt="Firefox 19.0.2"></a></p><p id="validation"><a href=                              "http://validator.w3.org/check?uri=http%3A%2F%2Fwww.gtalbot.org%2FBugzillaSection%2FBug189308_ScrollEvent.html"                      title=                              "Verify this page's compliance to the strict definition of HTML 4.01"><img src="../GRAPHICS/PNG/valid-html401.png"                                                                                                         width="88" height="31" alt="Valid HTML 4.01!"></a><a href=                                                                                                                                                                      "http://jigsaw.w3.org/css-validator/validator?uri=http://www.gtalbot.org/BugzillaSection/Bug189308_ScrollEvent.html&amp;warning=2&amp;profile=css21&amp;usermedium=all"                                                                                                                                                              title="Verify this page's CSS code"><img src="../GRAPHICS/PNG/vcss.png"                                                                                                                                                                                                       width="88" height="31" alt="CSS compliant"></a> <a href=                                                                                                                                                                                                                                                                  "http://www.webstandards.org/"><img src=                                                                                                                                                                                                                                                                                                              "../GRAPHICS/GIF/webstandardsproject.gif" width="88" height="31" alt=                                                                                                                                                                                                                                                                                                              "Web standards project"></a></p></body></html>